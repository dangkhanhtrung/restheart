(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{RuY4:function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=1)}([function(t,e,n){"use strict";var r=n(4);e.a={name:"vuejx-workflow-action",props:{database:{type:String,default:null},collection:{type:String,default:null},filter:{type:Object,default:null},data:{type:Object,default:{}},dataKey:{type:String,default:""},showBack:{type:Boolean,default:!1}},setup:function(t,e){return Object(r.a)(t,e)}}},function(t,e,n){t.exports=n(2)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(8),a=n(3)(r.a,o.a,!1,null,null,null);e.default=a.exports},function(t,e){t.exports=function(t,e,n,o,a,u){var c,i=t=t||{},s=r(t.default);"object"!==s&&"function"!==s||(c=t,i=t.default);var f,l="function"==typeof i?i.options:i;if(e&&(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0),n&&(l.functional=!0),a&&(l._scopeId=a),u?(f=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(u)},l._ssrRegister=f):o&&(f=o),f){var d=l.functional,p=d?l.render:l.beforeCreate;d?(l._injectStyles=f,l.render=function(t,e){return f.call(e),p(t,e)}):l.beforeCreate=p?[].concat(p,f):[f]}return{esModule:c,exports:i,options:l}}},function(t,e,n){"use strict";var r=n(5),o=n.n(r),a=n(6),u=n.n(a),c=n(7);n.n(c),e.a=function(t,e){var n=this,r=Object(c.value)([]);Object(c.onMounted)(u()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a();case 2:return t.next=4,i();case 4:case"end":return t.stop()}},t,n)})));var a=function(){r.value=[]},i=function(){var a=u()(o.a.mark(function a(){var u,c;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return u="",n.next=3,e.parent.$store.dispatch("vuejx_manager/userOne",{db:"vuejx_cfg",collection:"vuejx_collection",filter:{shortName:t.collection},limit:1,keys:{workflow:1}}).then(function(t){null!=t&&(u=t.workflow)}).catch(function(t){});case 3:return c=void 0!==t.data[t.dataKey]&&null!==t.data[t.dataKey]?String(t.data[t.dataKey]._source.shortName):"-1",n.next=6,e.parent.$store.dispatch("vuejx_manager/workflowAction",{workflow:u,parent:c}).then(function(t){void 0!==t&&t.hasOwnProperty("hits")&&t.hits.hasOwnProperty("hits")&&(r.value=t.hits.hits)}).catch(function(t){});case 6:case"end":return n.stop()}},a,n)}));return function(){return a.apply(this,arguments)}}(),s=function(){var r=u()(o.a.mark(function r(a,u){var c,i;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if("Import"!==u){n.next=4;break}e.emit("importAction"),n.next=21;break;case 4:if("Export"!==u){n.next=8;break}e.emit("exportAction"),n.next=21;break;case 8:if(void 0===t.filter||null===t.filter){n.next=15;break}return"vuejx_manager/userUpdateMany",t.filter.actionCode=a,n.next=13,e.parent.$store.dispatch("vuejx_manager/userUpdateMany",t.filter).then(function(t){window.Vue.toastr.success("Success."),e.emit("success")}).catch(function(t){window.Vue.toastr.error("err"),e.emit("error")});case 13:n.next=21;break;case 15:return(c=t.data).site=window.Vue.$router.history.current.params.site,i="vuejx_manager/userUpdateById",void 0!==window.Vue.$router.history.current.query._id&&null!==window.Vue.$router.history.current.query._id&&""!==window.Vue.$router.history.current.query._id||(i="vuejx_manager/userCreate"),n.next=21,e.parent.$store.dispatch(i,{db:t.database,collection:t.collection,body:c,actionCode:a}).then(function(t){window.Vue.toastr.success("Success."),e.emit("success")}).catch(function(t){window.Vue.toastr.error("err"),e.emit("error")});case 21:case"end":return n.stop()}},r,n)}));return function(t,e){return r.apply(this,arguments)}}();return{actions:r,goBack:function(){e.emit("goBack")},submitWorkflow:s}}},function(t,e){t.exports=n("14Xm")},function(t,e){t.exports=n("D3Ub")},function(t,e){t.exports=n("hTPA")},function(t,e,n){"use strict";var r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vuejx__workflow__action"},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[t._l(t.actions,function(e,r){return[n("v-btn",{key:r,staticClass:"mx-1",attrs:{color:"primary"},on:{click:function(n){t.submitWorkflow(e._source.id,e._source.text)}}},[t._v(t._s(e._source.text))])]}),t._v(" "),t.showBack?n("v-btn",{attrs:{outlined:"",color:"primary",dark:""},on:{click:function(e){t.goBack()}}},[t._v("Quay láº¡i")]):t._e()],2),t._v(" "),n("v-flex",{attrs:{xs12:""}})],1)],1)},staticRenderFns:[]};e.a=r}])}}]);