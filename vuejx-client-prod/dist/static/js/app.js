!function(e){function t(t){for(var r,a,i=t[0],l=t[1],c=t[2],s=0,v=[];s<i.length;s++)a=i[s],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&v.push(o[a][0]),o[a]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(d&&d(t);v.length;)v.shift()();return u.push.apply(u,c||[]),n()}function n(){for(var e,t=0;t<u.length;t++){for(var n=u[t],r=!0,a=1;a<n.length;a++){var l=n[a];0!==o[l]&&(r=!1)}r&&(u.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={5:0},o={5:0},u=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[];a[e]?t.push(a[e]):0!==a[e]&&{8:1,9:1}[e]&&t.push(a[e]=new Promise(function(t,n){for(var r="static/css/"+({}[e]||e)+".css",o=i.p+r,u=document.getElementsByTagName("link"),l=0;l<u.length;l++){var c=(d=u[l]).getAttribute("data-href")||d.getAttribute("href");if("stylesheet"===d.rel&&(c===r||c===o))return t()}var s=document.getElementsByTagName("style");for(l=0;l<s.length;l++){var d;if((c=(d=s[l]).getAttribute("data-href"))===r||c===o)return t()}var v=document.createElement("link");v.rel="stylesheet",v.type="text/css",v.onload=t,v.onerror=function(t){var r=t&&t.target&&t.target.src||o,u=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");u.request=r,delete a[e],v.parentNode.removeChild(v),n(u)},v.href=o,document.getElementsByTagName("head")[0].appendChild(v)}).then(function(){a[e]=0}));var n=o[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise(function(t,r){n=o[e]=[t,r]});t.push(n[2]=r);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=function(e){return i.p+"static/js/"+({}[e]||e)+".js"}(e);var c=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(s);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",c.name="ChunkLoadError",c.type=r,c.request=a,n[1](c)}o[e]=void 0}};var s=setTimeout(function(){u({type:"timeout",target:l})},12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="http://localhost:8801/",i.oe=function(e){throw console.error(e),e};var l=window.webpackJsonp=window.webpackJsonp||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var s=0;s<l.length;s++)t(l[s]);var d=c;u.push(["Vtdi",0,6]),n()}({"0Y2e":function(e,t,n){},"8SHQ":function(e,t,n){"use strict";var r={oauth2:"http://localhost:8080/oauth2/#/",vuejx:"http://localhost:8080/core/restheart/",reindex:"http://localhost:8080/core/reindex",reindexAll:"http://localhost:8080/core/secure/reindexall",account:"http://localhost:8080/vuejx/account/secure/",async:"http://localhost:8080/vuejx/async/secure/",vuejxcfg:"vuejx_cfg/",workspace:"http://119.17.200.66:3001",blog:"http://119.17.200.66:3001"};n.d(t,"a",function(){return r})},"A0++":function(e,t,n){"use strict";var r=n("tEb+");n.n(r).a},BONj:function(e,t,n){"use strict";n.r(t);var r=n("8SHQ");t.default={postDB:function(e,t){e.state;return new Promise(function(e,n){window.Vue.$axios.post(r.a.vuejx+t.db+"/"+t.collection,t.data,{headers:{Authorization:"Bearer "+localStorage.getItem("access_token"),token:localStorage.getItem("token")}}).then(function(t){console.log("response postDB",t),e(t)}).catch(function(e){n(e)})})},putDB:function(e,t){e.state;return new Promise(function(e,n){window.Vue.$axios.put(r.a.vuejx+t.db+"/"+t.collection+"/"+t.id,t.data,{headers:{Authorization:"Bearer "+localStorage.getItem("access_token"),token:localStorage.getItem("token")}}).then(function(t){console.log("response putDB",t),e(t)}).catch(function(e){n(e)})})},putDBQuery:function(e,t){e.state;return new Promise(function(e,n){var a=t.id;window.Vue.$axios.put(r.a.account+a,t,{headers:{Authorization:"Bearer "+localStorage.getItem("access_token"),token:localStorage.getItem("token")}}).then(function(t){e(t)}).catch(function(e){n(e)})})},removeDB:function(e,t){e.state;return new Promise(function(e,n){window.Vue.$axios.delete(r.a.vuejx+t.db+"/"+t.collection+"/"+t.id,{params:t.data,headers:{Authorization:"Bearer "+localStorage.getItem("access_token"),token:localStorage.getItem("token")}}).then(function(t){console.log("response removeDB",t),e(t)}).catch(function(e){n(e)})})},pullDBDetail:function(e,t){e.state;return new Promise(function(e,n){window.Vue.$axios.get(r.a.vuejx+t.db+"/"+t.collection+"/"+t.id,{headers:{Authorization:"Bearer "+localStorage.getItem("access_token"),token:localStorage.getItem("token")}}).then(function(t){e(t.data)}).catch(function(e){n(e)})})},pullDB:function(e,t){e.state;return new Promise(function(e,n){window.Vue.$axios.get(r.a.vuejx+t.db+"/"+t.collection,{params:t.params,headers:{Authorization:"Bearer "+localStorage.getItem("access_token"),token:localStorage.getItem("token")}}).then(function(t){e(t.data)}).catch(function(e){n(e)})})},pullDBList:function(e,t){e.state;return new Promise(function(e,n){window.Vue.$axios.get(r.a.vuejx+t.db,{params:t.params,headers:{Authorization:"Bearer "+localStorage.getItem("access_token"),token:localStorage.getItem("token")}}).then(function(t){e(t.data)}).catch(function(e){n(e)})})},pullQuery:function(e,t){e.state;return new Promise(function(e,n){window.Vue.$axios.get(t.api+"/"+t.db+"/"+t.collection,{params:t.params,headers:{Authorization:"Bearer "+localStorage.getItem("access_token"),token:localStorage.getItem("token")}}).then(function(t){e(t.data)}).catch(function(e){n(e)})})},pullAPI:function(e,t){e.state;return new Promise(function(e,n){window.Vue.$axios.get(t.api,{params:t.params,headers:{Authorization:"Bearer "+localStorage.getItem("access_token"),token:localStorage.getItem("token")}}).then(function(t){e(t.data)}).catch(function(e){n(e)})})},pullDBES:function(e,t){e.state;return new Promise(function(e,n){var r=t.variables;r.token=localStorage.getItem("token"),window.Vue.$axios.post(window.location.origin+"/vuejx",{query:t.query,variables:JSON.stringify(r)},{headers:{Authorization:"Bearer "+localStorage.getItem("access_token"),token:localStorage.getItem("token")}}).then(function(t){e(t.data.data)}).catch(function(e){n(e)})})}}},Jm28:function(e,t,n){"use strict";n.r(t),t.default={lastCall:!1,loadingBtn:!1}},KnQo:function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.r(t);var a=n("xlMM"),o={};a.keys().forEach(function(e){if("./index.js"!==e){var t=r(e.replace(/(\.\/|\.js)/g,"").split("/"),2),n=t[0],u=t[1];o[n]||(o[n]={namespaced:!0}),o[n][u]=a(e).default}}),t.default=o},Vtdi:function(e,t,n){"use strict";n.r(t);var r={name:"App"},a=(n("A0++"),n("KHd+")),o=Object(a.a)(r,function(){var e=this.$createElement,t=this._self._c||e;return t("v-app",[t("router-view")],1)},[],!1,null,null,null).exports,u=n("jE9Z"),i=n("ConA"),l=n.n(i),c=n("8SHQ"),s=[{path:"*",component:function(){return n.e(9).then(n.bind(null,"7l0S"))}},{path:"/admin/:database?/:collection?/:site?",name:"Admin page",meta:{requiresAuth:!0},props:!0,component:function(){return n.e(15).then(n.bind(null,"URd+"))},children:[{path:"/admin/:database?/:collection?/:site?",name:"Entities management",meta:{requiresAuth:!0},props:!0,component:function(){return n.e(22).then(n.bind(null,"l2lb"))}},{path:"/admin/:database?/:collection?/:site?/:id",name:"Entities CRUD",meta:{requiresAuth:!0},props:!0,component:function(){return n.e(14).then(n.bind(null,"2hq7"))}},{path:"/admin/:database?/:collection?/:site?/:id/extension",name:"Entities extension",meta:{requiresAuth:!0},props:!0,component:function(){return n.e(13).then(n.bind(null,"3dNW"))}},{path:"/admin/:database?/:collection?/:site?/:id/async/:shortName/:storeCollection",name:"ASYNC extension",meta:{requiresAuth:!0},props:!0,component:function(){return n.e(8).then(n.bind(null,"oQj7"))}}]},{path:"/web/:site?/:page?",name:"Web sites",props:!0,meta:{visibility:"web"},component:function(){return n.e(24).then(n.bind(null,"9y75"))},children:[{path:"/web/:site?/:page?",name:"Web pages",props:!0,meta:{visibility:"web"},component:function(){return n.e(4).then(n.bind(null,"sADc"))}}]},{path:"/group/:site?/:page?",name:"Group sites",props:!0,meta:{visibility:"group"},component:function(){return n.e(23).then(n.bind(null,"GfPz"))},children:[{path:"/group/:site?/:page?",name:"Group pages",props:!0,meta:{visibility:"group"},component:function(){return n.e(4).then(n.bind(null,"sADc"))}}]}],d=window.Vue;d.use(u.a),d.use(l.a);var v=new u.a({routes:s});v.afterEach(function(e,t){null===t.name&&setTimeout(function(){var e=document.getElementById("loading__mark");e.style.opacity=0,e.style.zIndex=-1},200)}),v.beforeEach(function(e,t,n){var r=e.matched.some(function(e){return e.meta.requiresAuth}),a=localStorage.getItem("isAuthenticated");r&&"false"===a?window.location.href=c.a.oauth2:setTimeout(function(){n()},0)});var m=v,f=n("L2JU"),p=n("KnQo");window.Vue.use(f.a);var h=new f.a.Store({modules:p.default}),b=(n("1eg4"),n("hTPA")),g=n("avyA"),y=n("pKFz"),x=n.n(y),_=n("vDqi"),w=n.n(_);function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t,n,r,a,o,u){try{var i=e[o](u),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function $(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function u(e){j(o,r,a,u,i,"next",e)}function i(e){j(o,r,a,u,i,"throw",e)}u(void 0)})}}function D(e){var t;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(t=e[Symbol.asyncIterator]))return t.call(e);if(Symbol.iterator&&null!=(t=e[Symbol.iterator]))return t.call(e)}throw new TypeError("Object is not async iterable")}var O=function(e,t){var n,r=Object(b.value)(!1),a=Object(b.value)(!1),o=Object(b.value)({}),u=Object(b.value)(e.data),i=Object(b.value)([]);Object(b.onMounted)($(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,c();case 3:case"end":return e.stop()}},e)}))),Object(b.onDestroyed)(function(){l()});var l=function(){a.value=!1,r.value=!1,o.value={},u.value={},i.value={}},c=function(){var t=$(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o.value=e.config,u.value=e.data,!o.value.hasOwnProperty("data")){t.next=6;break}i.value[o.value.model+"_items"]=o.value.data,t.next=16;break;case 6:if(!Array.isArray(u.value[o.value.model])){t.next=10;break}i.value[o.value.model+"_items"]=void 0!==u.value[o.value.model]?u.value[o.value.model]:[],t.next=16;break;case 10:if("object"!==S(u.value[o.value.model])){t.next=14;break}i.value[o.value.model+"_items"]=void 0!==u.value[o.value.model]?u.value[o.value.model]:[],t.next=16;break;case 14:return t.next=16,s();case 16:r.value=!0,a.value=!1;case 18:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),s=function(){var n=$(regeneratorRuntime.mark(function n(){var u,l,c,s,d,v,m,f,p;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(a.value){n.next=53;break}if(r.value=!1,!o.value.hasOwnProperty("link")){n.next=43;break}u=!0,l=!1,n.prev=5,s=D(o.value.link);case 7:return n.next=9,s.next();case 9:return d=n.sent,u=d.done,n.next=13,d.value;case 13:if(v=n.sent,u){n.next=25;break}if(m=v,"query search($token: String, $body: JSON, $db: String, $collection: String) {\n                        results: search(token: $token, body: $body, db: $db, collection: $collection )\n                    }",f={size:1e4,sort:o.value.sort,_source:{includes:o.value.column},query:{bool:{filter:{match:{site:e.site}},must:[{bool:{should:[]}}]}}},m.hasOwnProperty("condition")&&m.condition.length>0)for(p in m.condition)f.query.bool.must.push(m.condition[p]);return"dict_item"!==m.collection&&"vuejx_site"!==m.collection||(m.collection="dict_item",f.query.bool.must.push({match:{"dictCollection._source.shortName":m.dictCollection}})),n.next=22,t.parent.$store.dispatch("vuejx_manager/pullDBES",{query:"query search($token: String, $body: JSON, $db: String, $collection: String) {\n                        results: search(token: $token, body: $body, db: $db, collection: $collection )\n                    }",variables:{body:f,db:m.db,collection:m.collection}}).then(function(e){null!==e.results?i.value[o.value.model+"_items"]=e.results.hits.hits:i.value[o.value.model+"_items"]=[]}).catch(function(e){i.value[o.value.model+"_items"]=[]});case 22:u=!0,n.next=7;break;case 25:n.next=31;break;case 27:n.prev=27,n.t0=n.catch(5),l=!0,c=n.t0;case 31:if(n.prev=31,n.prev=32,u||null==s.return){n.next=36;break}return n.next=36,s.return();case 36:if(n.prev=36,!l){n.next=39;break}throw c;case 39:return n.finish(36);case 40:return n.finish(31);case 41:n.next=51;break;case 43:if(!o.value.hasOwnProperty("link_mongo")||""!==o.value.link_mongo){n.next=48;break}return n.next=46,t.parent.$store.dispatch("vuejx_manager/pullDBList",{db:"",params:{pagesize:1e3}}).then(function(e){void 0!==e&&e.hasOwnProperty("_embedded")?i.value[o.value.model+"_items"]=e._embedded:i.value[o.value.model+"_items"]=[]}).catch(function(e){i.value[o.value.model+"_items"]=[]});case 46:n.next=51;break;case 48:if(!o.value.hasOwnProperty("link_mongo")||""===o.value.link_mongo){n.next=51;break}return n.next=51,t.parent.$store.dispatch("vuejx_manager/pullDBList",{db:o.value.link_mongo,params:{pagesize:1e3}}).then(function(e){void 0!==e&&e.hasOwnProperty("_embedded")?i.value[o.value.model+"_items"]=e._embedded:i.value[o.value.model+"_items"]=[]}).catch(function(e){i.value[o.value.model+"_items"]=[]});case 51:a.value=!0,r.value=!0;case 53:case"end":return n.stop()}},n,null,[[5,27,31,41],[32,,36,40]])}));return function(){return n.apply(this,arguments)}}();return k(n={item:o,formData:u},"formData",u),k(n,"formDataSource",i),k(n,"render",a),k(n,"doChangeValue",function(){console.log(u.value)}),k(n,"pullDataSource",s),k(n,"rendered",r),n},P={name:"vuejx-autocomplete",props:{config:{type:String,default:"vuejx_cfg"},data:{type:String,default:"vuejx_db"},site:{type:String,default:"guest"}},setup:function(e,t){return O(e,t)}},N=Object(a.a)(P,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-subheader",{staticClass:"vjx_label"},[e._v("\n    "+e._s(e.item.label)+"\n    "),e.item.required?n("font",{staticClass:"required__class"},[e._v("*")]):e._e()],1),e._v(" "),n("v-autocomplete",{staticClass:"v__border",attrs:{items:e.formDataSource[e.item.model+"_items"],text:"",solo:"","hide-no-data":"","hide-details":"","item-text":e.item.itemText,"item-value":e.item.itemValue,multiple:!!e.item.multiple,"return-object":!!e.item.object,"small-chips":"","append-icon":(e.rendered,"$vuetify.icons.dropdown")},on:{focus:e.pullDataSource},model:{value:e.formData[e.item.model],callback:function(t){e.$set(e.formData,e.item.model,t)},expression:"formData[item['model']]"}})],1)},[],!1,null,null,null).exports;function A(e,t,n,r,a,o,u){try{var i=e[o](u),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function B(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function u(e){A(o,r,a,u,i,"next",e)}function i(e){A(o,r,a,u,i,"throw",e)}u(void 0)})}}var C=function(e,t){var n=Object(b.value)(!1),r=Object(b.value)(!1),a=Object(b.value)({}),o=Object(b.value)(e.data),u=Object(b.value)([]),i=Object(b.value)(!1),l=Object(b.value)({}),c=Object(b.value)([]);Object(b.onMounted)(B(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s(),e.next=3,d();case 3:case"end":return e.stop()}},e)}))),Object(b.onDestroyed)(function(){s()});var s=function(){r.value=!1,n.value=!1,a.value={},o.value={},u.value={}},d=function(){var t=B(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a.value=e.config,o.value=e.data;case 2:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),v=function(){var n=B(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return l.value.username=o.value.screenName,l.value.id=e.id,n.next=4,t.parent.$store.dispatch("vuejx_manager/putDBQuery",l.value).then(function(e){console.log(e)}).catch(function(e){console.log(e)});case 4:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}(),m=function(){var e=B(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.parent.$store.dispatch("vuejx_manager/pullDB",{db:"oauth2",collection:"users",params:{filter:{username:o.value.screenName}}}).then(function(e){void 0!==e[0]&&(l.value=e[0])}).catch(function(e){console.log(e)});case 2:return e.next=4,t.parent.$store.dispatch("vuejx_manager/pullDB",{db:"directory",collection:"role",params:{filter:{"status._source.shortName":"activate"}}}).then(function(e){u.value.roles_items=e}).catch(function(e){console.log(e)});case 4:i.value=!0;case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return{item:a,formData:o,formDataSource:u,render:r,rendered:n,dialog:i,accountSubmit:v,accountData:l,accountDataSource:c,pullAccount:m}},R={name:"vuejx-account",props:{config:{type:String,default:"vuejx_cfg"},data:{type:String,default:"vuejx_db"},site:{type:String,default:"guest"},id:{type:String,default:""}},setup:function(e,t){return C(e,t)}},I=Object(a.a)(R,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-subheader",{staticClass:"vjx_label"}),e._v(" "),n("v-btn",{attrs:{block:"",color:"primary",dark:""},on:{click:function(t){return t.stopPropagation(),e.pullAccount(t)}}},[e._v("\n    "+e._s(e.item.label)+"\n  ")]),e._v(" "),n("v-dialog",{attrs:{"max-width":"400",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Account manager")]),e._v(" "),n("v-card-text",[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-subheader",{staticClass:"vjx_label"},[e._v("\n              Old password:\n            ")]),e._v(" "),n("v-text-field",{staticClass:"v__border",attrs:{text:"",solo:"",type:"password"},model:{value:e.accountData.oldPass,callback:function(t){e.$set(e.accountData,"oldPass",t)},expression:"accountData['oldPass']"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-subheader",{staticClass:"vjx_label"},[e._v("\n              New password:\n            ")]),e._v(" "),n("v-text-field",{staticClass:"v__border",attrs:{text:"",solo:"",type:"password"},model:{value:e.accountData.newPass,callback:function(t){e.$set(e.accountData,"newPass",t)},expression:"accountData['newPass']"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-subheader",{staticClass:"vjx_label"},[e._v("\n              Confirm password:\n            ")]),e._v(" "),n("v-text-field",{staticClass:"v__border",attrs:{text:"",solo:"",type:"password"},model:{value:e.accountData.confirmPass,callback:function(t){e.$set(e.accountData,"confirmPass",t)},expression:"accountData['confirmPass']"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-subheader",{staticClass:"vjx_label"},[e._v("\n              Roles:\n            ")]),e._v(" "),e.dialog?n("v-autocomplete",{staticClass:"v__border",attrs:{items:e.formDataSource.roles_items,text:"",solo:"","hide-no-data":"","hide-details":"","item-text":"title","item-value":"shortName",multiple:!0,"return-object":!1,"small-chips":"","append-icon":(e.rendered,"$vuetify.icons.dropdown")},model:{value:e.accountData.roles,callback:function(t){e.$set(e.accountData,"roles",t)},expression:"accountData['roles']"}}):e._e()],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-subheader",{staticClass:"vjx_label"},[e._v("\n              Scope:\n            ")]),e._v(" "),n("v-text-field",{staticClass:"v__border",attrs:{text:"",solo:""},model:{value:e.accountData.scope,callback:function(t){e.$set(e.accountData,"scope",t)},expression:"accountData['scope']"}})],1)],1)],1),e._v(" "),n("v-card-actions",[n("div",{staticClass:"flex-grow-1"}),e._v(" "),n("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){e.dialog=!1}}},[e._v("\n          Close\n        ")]),e._v(" "),n("v-btn",{attrs:{color:"primary",text:""},on:{click:e.accountSubmit}},[e._v("\n          Submit\n        ")])],1)],1)],1)],1)},[],!1,null,null,null).exports;function V(e,t,n,r,a,o,u){try{var i=e[o](u),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function E(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function u(e){V(o,r,a,u,i,"next",e)}function i(e){V(o,r,a,u,i,"throw",e)}u(void 0)})}}function q(e){var t;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(t=e[Symbol.asyncIterator]))return t.call(e);if(Symbol.iterator&&null!=(t=e[Symbol.iterator]))return t.call(e)}throw new TypeError("Object is not async iterable")}var T=function(e,t){var n=Object(b.value)(!1),r=Object(b.value)(!1),a=Object(b.value)({}),o=Object(b.value)(e.data),u=Object(b.value)([]),i=Object(b.value)(!1),l=Object(b.value)({}),c=Object(b.value)([]),s=Object(b.value)([]),d=Object(b.value)({}),v=Object(b.value)(!1);Object(b.onMounted)(E(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m(),e.next=3,f();case 3:v.value=!0;case 4:case"end":return e.stop()}},e)}))),Object(b.onDestroyed)(function(){m()});var m=function(){v.value=!1,r.value=!1,n.value=!1,a.value={},o.value={},u.value={},d.value={}},f=function(){var n=E(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a.value=e.config,o.value=e.data,d.value[a.value.model]=[],"query search($token: String, $body: JSON, $db: String, $collection: String) {\n            results: search(token: $token, body: $body, db: $db, collection: $collection )\n        }",r={sort:[{order:"asc"}],_source:{includes:["shortName","title"]},query:{bool:{must:[{match:{"status._source.shortName":"activate"}}]}}},n.next=7,t.parent.$store.dispatch("vuejx_manager/pullDBES",{query:"query search($token: String, $body: JSON, $db: String, $collection: String) {\n            results: search(token: $token, body: $body, db: $db, collection: $collection )\n        }",variables:{body:r,db:"directory",collection:"permission"}}).then(function(e){if(void 0!==e.results&&null!==e.results){if(s.value=e.results.hits.hits,void 0!==o.value[a.value.model]&&null!==o.value[a.value.model]){u.value[a.value.model+"_items"]=[];var t=!0,n=!1,r=void 0;try{for(var i,l=s.value[Symbol.iterator]();!(t=(i=l.next()).done);t=!0){var c=i.value,v=!0,m=!1,f=void 0;try{for(var p,h=o.value[a.value.model][Symbol.iterator]();!(v=(p=h.next()).done);v=!0){var b=p.value;if(String(c._source.shortName)===String(b.permission)){var g=String(a.value.itemValue).split("."),y=String(a.value.itemText).split(".");if(g.length>0){var x={};x[g[0]]={},x[g[0]][g[1]]=b.shortName,x[g[0]][y[1]]=b.title,void 0===d.value[a.value.model+"_"+c._source.shortName]&&(d.value[a.value.model+"_"+c._source.shortName]=[]),d.value[a.value.model+"_"+c._source.shortName].push(x),u.value[a.value.model+"_items"].push(x)}else{var _={};_[a.value.itemValue]=b.shortName,_[a.value.itemText]=b.title,u.value[a.value.model+"_items"].push(_)}}}}catch(e){m=!0,f=e}finally{try{v||null==h.return||h.return()}finally{if(m)throw f}}}}catch(e){n=!0,r=e}finally{try{t||null==l.return||l.return()}finally{if(n)throw r}}}}else s.value=[]}).catch(function(e){s.value=[]});case 7:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}(),p=function(){var n=E(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return l.value.username=o.value.screenName,l.value.id=e.id,n.next=4,t.parent.$store.dispatch("vuejx_manager/putDBQuery",l.value).then(function(e){console.log(e)}).catch(function(e){console.log(e)});case 4:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}(),h=function(){var e=E(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.parent.$store.dispatch("vuejx_manager/pullDB",{db:"oauth2",collection:"users",params:{filter:{username:o.value.screenName}}}).then(function(e){void 0!==e[0]&&(l.value=e[0])}).catch(function(e){console.log(e)});case 2:return e.next=4,t.parent.$store.dispatch("vuejx_manager/pullDB",{db:"directory",collection:"role",params:{filter:{"status._source.shortName":"activate"}}}).then(function(e){u.value.roles_items=e}).catch(function(e){console.log(e)});case 4:i.value=!0;case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),g=function(){var i=E(regeneratorRuntime.mark(function i(){var l,c,s,d,v,m,f,p,h;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(r.value){i.next=53;break}if(n.value=!1,!a.value.hasOwnProperty("link")){i.next=43;break}l=!0,c=!1,i.prev=5,d=q(a.value.link);case 7:return i.next=9,d.next();case 9:return v=i.sent,l=v.done,i.next=13,v.value;case 13:if(m=i.sent,l){i.next=25;break}if(f=m,"query search($token: String, $body: JSON, $db: String, $collection: String) {\n                        results: search(token: $token, body: $body, db: $db, collection: $collection )\n                    }",p={sort:a.value.sort,_source:{includes:a.value.column},query:{bool:{filter:{match:{site:e.site}},must:[{bool:{should:[]}}]}}},f.hasOwnProperty("condition")&&f.condition.length>0)for(h in f.condition)p.query.bool.must.push(f.condition[h]);return"dict_item"===f.collection&&p.query.bool.must.push({match:{"dictCollection._source.shortName":o.value.dictCollection._source.shortName}}),i.next=22,t.parent.$store.dispatch("vuejx_manager/pullDBES",{query:"query search($token: String, $body: JSON, $db: String, $collection: String) {\n                        results: search(token: $token, body: $body, db: $db, collection: $collection )\n                    }",variables:{body:p,db:f.db,collection:f.collection}}).then(function(e){null!==e.results?u.value[a.value.model+"_items"]=e.results.hits.hits:u.value[a.value.model+"_items"]=[]}).catch(function(e){u.value[a.value.model+"_items"]=[]});case 22:l=!0,i.next=7;break;case 25:i.next=31;break;case 27:i.prev=27,i.t0=i.catch(5),c=!0,s=i.t0;case 31:if(i.prev=31,i.prev=32,l||null==d.return){i.next=36;break}return i.next=36,d.return();case 36:if(i.prev=36,!c){i.next=39;break}throw s;case 39:return i.finish(36);case 40:return i.finish(31);case 41:i.next=51;break;case 43:if(!a.value.hasOwnProperty("link_mongo")||""!==a.value.link_mongo){i.next=48;break}return i.next=46,t.parent.$store.dispatch("vuejx_manager/pullDBList",{db:"",params:{pagesize:1e3}}).then(function(e){u.value[a.value.model+"_items"]=e}).catch(function(e){u.value[a.value.model+"_items"]=[]});case 46:i.next=51;break;case 48:if(!a.value.hasOwnProperty("link_mongo")||""===a.value.link_mongo){i.next=51;break}return i.next=51,t.parent.$store.dispatch("vuejx_manager/pullDBList",{db:a.value.link_mongo,params:{pagesize:1e3}}).then(function(e){u.value[a.value.model+"_items"]=e}).catch(function(e){u.value[a.value.model+"_items"]=[]});case 51:r.value=!0,n.value=!0;case 53:case"end":return i.stop()}},i,null,[[5,27,31,41],[32,,36,40]])}));return function(){return i.apply(this,arguments)}}();return{item:a,formData:o,formDataSource:u,render:r,rendered:n,dialog:i,accountSubmit:p,accountData:l,accountDataSource:c,pullAccount:h,permissionList:s,pullDataSource:g,roleData:d,inject:v,changeData:function(){for(var e in o.value[a.value.model]=[],d.value){var t=e.replace(a.value.model+"_","");console.log("permission",t);var n=!0,r=!1,u=void 0;try{for(var i,l=d.value[e][Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var c=i.value,s=JSON.parse(JSON.stringify(c)),v=String(a.value.itemValue).split(".");for(var m in v)c=c[v[m]];var f=String(a.value.itemText).split(".");for(var p in f)s=s[f[p]];o.value[a.value.model].push({shortName:c,title:s,permission:t})}}catch(e){r=!0,u=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw u}}}}}},z={name:"vuejx-role",props:{config:{type:String,default:"vuejx_cfg"},data:{type:Object,default:{}},site:{type:String,default:"guest"},id:{type:String,default:""}},setup:function(e,t){return T(e,t)}},M=Object(a.a)(z,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-subheader",{staticClass:"vjx_label"},[e._v("\n    "+e._s(e.item.label)+"\n  ")]),e._v(" "),n("div",{staticStyle:{border:"1px solid gainsboro"}},[n("div",{staticClass:"pa-3",class:void 0!==e.item.color?e.item.color:"yellow lighten-5"},e._l(e.permissionList,function(t,r){return n("div",{key:r},[n("v-subheader",{staticClass:"vjx_label"},[e._v("\n          "+e._s(t._source.title)+"\n        ")]),e._v(" "),n("v-layout",{attrs:{row:"",wrap:""}},[e.item.ext?n("v-flex",{attrs:{xs12:""}},[n("v-combobox",{staticClass:"v__border",attrs:{items:e.formDataSource[e.item.model+"_items"],"hide-selected":"",multiple:"","persistent-hint":"","small-chips":"",text:"",solo:"","item-text":e.item.itemText,"item-value":e.item.itemValue,"return-object":!0},scopedSlots:e._u([{key:"no-data",fn:function(){return[n("v-list-item",[n("v-list-item-content",[n("v-list-item-title",[e._v("\n                        Press\n                        "),n("kbd",[e._v("enter")]),e._v("\n                        to create a new "+e._s(e.item.model)+"\n                      ")])],1)],1)]},proxy:!0}],null,!0),model:{value:e.roleData[e.item.model],callback:function(t){e.$set(e.roleData,e.item.model,t)},expression:"roleData[item['model']]"}})],1):n("v-flex",{attrs:{xs12:""}},[n("v-autocomplete",{staticClass:"v__border",attrs:{items:e.formDataSource[e.item.model+"_items"],text:"",solo:"","hide-no-data":"","hide-details":"","item-text":e.item.itemText,"item-value":e.item.itemValue,multiple:!0,"return-object":!0,"small-chips":"","append-icon":(e.rendered,"$vuetify.icons.dropdown")},on:{focus:e.pullDataSource,change:e.changeData},model:{value:e.roleData[e.item.model+"_"+t._source.shortName],callback:function(n){e.$set(e.roleData,e.item.model+"_"+t._source.shortName,n)},expression:"roleData[item['model'] + '_' + el['_source']['shortName']]"}})],1)],1)],1)}),0)])],1)},[],!1,null,null,null).exports,J=(n("0wR0"),n("hUol")),L=n.n(J);function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function U(e,t,n,r,a,o,u){try{var i=e[o](u),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function W(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function u(e){U(o,r,a,u,i,"next",e)}function i(e){U(o,r,a,u,i,"throw",e)}u(void 0)})}}function K(e){var t;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(t=e[Symbol.asyncIterator]))return t.call(e);if(Symbol.iterator&&null!=(t=e[Symbol.iterator]))return t.call(e)}throw new TypeError("Object is not async iterable")}var G=function(){return Promise.all([n.e(1),n.e(19)]).then(n.t.bind(null,"RTAS",7))},F=function(){return Promise.all([n.e(1),n.e(17)]).then(n.t.bind(null,"sDba",7))},Y=function(){return Promise.all([n.e(1),n.e(7)]).then(n.t.bind(null,"wxJr",7))},H=function(){return n.e(16).then(n.t.bind(null,"/Dhl",7))},Z=function(){return n.e(18).then(n.t.bind(null,"vsFi",7))},X={install:function(e){e.component("vuejx-header",G),e.component("vuejx-drawers",F),e.component("vuejx-content",H),e.component("vuejx-footer",Z),e.use(g.a),e.use(x.a),e.component("vuejx-table",Y),e.component(N.name,N),e.component(I.name,I),e.component(M.name,M)}};L.a.options={closeButton:!0,timeOut:"6000"},window.Vue.toastr=L.a,window.Vue.$axios=w.a,window.Vue.redirect=function(){var e=W(regeneratorRuntime.mark(function e(t,n,r,a){var o,u,i,l,c,s,d,v,m,f,p,h,b,g,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(o=window.location.hash.substring(window.location.hash.indexOf("?")+1),u="",window.location.hash.startsWith("#/")?(i=window.location.hash.split("?"),l=Q(i,2),c=l[0],l[1],u=c):u=window.location.pathname,""!==r&&null!=r&&(u=r),s=/[?&]([^=#]+)=([^&#]*)/g,d={},v={};v=s.exec("&"+o);)d[v[1]]=decodeURIComponent(v[2]);for(null==t&&(t=[]),m=!0,f=!1,p=void 0,e.prev=10,h=t[Symbol.iterator]();!(m=(b=h.next()).done);m=!0)g=b.value,d[g.key]=g.value;e.next=18;break;case 14:e.prev=14,e.t0=e.catch(10),f=!0,p=e.t0;case 18:e.prev=18,e.prev=19,m||null==h.return||h.return();case 21:if(e.prev=21,!f){e.next=24;break}throw p;case 24:return e.finish(21);case 25:return e.finish(18);case 26:for(y in delete d[void 0],delete d.null,u+="?",a&&(d=[]),d)"t"!==y&&""!==d[y]&&void 0!==d[y]&&null!==d[y]&&(u+=y+"="+d[y]+"&");u=u.replace(/&$/,"").replace(/\?$/,""),n&&(u.indexOf("?")>0?u+="&t="+(new Date).getTime():u+="?t="+(new Date).getTime()),window.Vue.$router.push(u.replace(/#/,""));case 34:case"end":return e.stop()}},e,null,[[10,14,18,26],[19,,21,25]])}));return function(t,n,r,a){return e.apply(this,arguments)}}(),Vue.vuejxOrder=function(){var e=W(regeneratorRuntime.mark(function e(t,n){var r,a,o,u,i,l,c,s,d,v,m,f,p,h,b,g,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r={},a={},o={},u=!0,i=!1,e.prev=5,c=K(t);case 7:return e.next=9,c.next();case 9:return s=e.sent,u=s.done,e.next=13,s.value;case 13:if(d=e.sent,u){e.next=20;break}"onGroup"===(v=d).fn?r[v.e.fieldName]=window.Vue.colMapping[v.e.fieldName]:"onSortBy"===v.fn&&("ascending"===v.e.direction?a[v.e.fieldName]=window.Vue.colMapping[v.e.fieldName]:"descending"===v.e.direction&&(o[v.e.fieldName]=window.Vue.colMapping[v.e.fieldName]));case 17:u=!0,e.next=7;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(5),i=!0,l=e.t0;case 26:if(e.prev=26,e.prev=27,u||null==c.return){e.next=31;break}return e.next=31,c.return();case 31:if(e.prev=31,!i){e.next=34;break}throw l;case 34:return e.finish(31);case 35:return e.finish(26);case 36:for(h in m=[],f=[],p=[],a)m.push(a[h]);for(b in o)f.push(o[b]);for(g in r)p.push(r[g]);y=[{key:"_asc",value:m.toString()},{key:"_desc",value:f.toString()},{key:"_group",value:p.toString()}],null!=n&&!1===n&&(y=[]),Vue.redirect(y);case 43:case"end":return e.stop()}},e,null,[[5,22,26,36],[27,,31,35]])}));return function(t,n){return e.apply(this,arguments)}}(),w.a.interceptors.request.use(function(){var e=W(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t.data)for(n in t.data)""===t.data[n]?delete t.data[n]:Array.isArray(t.data[n])&&0===t.data[n].length&&delete t.data[n];return e.abrupt("return",t);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),function(e){return Promise.reject(e)}),window.Vue.$axios.interceptors.response.use(function(e){return e},function(e){if(void 0===e.response||401!==e.response.status)return void 0!==e.response&&400===e.response.status?(L.a.error(e.response.data._warnings),Promise.reject(e)):Promise.reject(e);window.location="/oauth2"});var ee=window.Vue;ee.use(X),ee.config.productionTip=!1,window.Vue.$router=m,ee.use(b.plugin),new ee({el:"#app",vuetify:new Vuetify({icons:{iconfont:"mdi"}}),router:m,store:h,components:{App:o},template:"<App/>"})},k0KU:function(e,t,n){"use strict";n.r(t);var r=n("WTW0");t.default={getField:r.a}},"tEb+":function(e,t,n){var r=n("0Y2e");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n("SZ7m").default)("cae52036",r,!0,{})},vYZG:function(e,t,n){"use strict";n.r(t);var r=function(e){return function(t,n){return t[e]=n}},a=n("WTW0");t.default={lastCall:r("lastCall"),loadingBtn:r("loadingBtn"),updateField:a.b}},xlMM:function(e,t,n){var r={"./index.js":"KnQo","./vuejx_manager/actions.js":"BONj","./vuejx_manager/getters.js":"k0KU","./vuejx_manager/mutations.js":"vYZG","./vuejx_manager/state.js":"Jm28"};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id="xlMM"}});